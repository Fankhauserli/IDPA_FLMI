<!doctype html>
<html lang="de">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>IDPA FLMI — MLP</title>
    <meta name="description" content="Erklärung des Multi-Layer Perceptron in LLMs" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../../assets/css/styles.css" />
</head>
<body class="antialiased bg-gray-50 text-gray-800">
    <header class="bg-white shadow">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 py-6">
            <a href="/" class="text-indigo-600 hover:underline">← Zurück zur Übersicht</a>
            <h1 class="text-3xl font-bold mt-2">Multilayer Perzeptron (MLP)</h1>
            <p class="text-gray-600 mt-1">Informationen speichern und ergänzen</p>
        </div>
    </header>
    <main class="max-w-4xl mx-auto px-4 py-12">
        <div class="bg-white p-8 rounded-lg shadow space-y-8">

            <div class="p-4 bg-blue-50 border-l-4 border-blue-400 text-blue-800">
                <p class="font-semibold">Anmerkung des Autors:</p>
                <p class="text-sm"><em>Erkläri hie ou Neurali Netzwerk - wöu schlussendlich isch MLP ja eis u i gseh noni wo das ds süsch erklärt wird --> oder lömers eifach us wüus nid direkt direkt brucht wird fürs verständnis was ä AI hie macht?</em></p>
            </div>

            <div>
                <h2 class="text-2xl font-bold mb-4">Die Rolle des MLP im Transformer</h2>
                <p class="text-lg leading-relaxed">Das MLP ist ein neuronales Netzwerk, welches dem LLM ermöglicht, Informationen zu speichern und zu ergänzen. Ein anschauliches Beispiel ist, wenn man einen Chatbot fragt, wie viele Personen in einen Airbus A320 passen. Solange das LLM keinen Zugriff aufs Internet hat, muss die Sitzplatzanzahl irgendwo innerhalb des Models gespeichert sein. Genau diesen Schritt übernimmt das MLP.</p>
                <p class="text-lg leading-relaxed mt-4">Damit wir den Ablauf genauer verstehen, schauen wir uns einen Durchlauf durchs MLP schrittweise genau an. In realen Zuständen werden mehrere Durchläufe parallel zueinander ausgeführt, um noch schnellere und präzisere Antworten geben zu können.</p>
            </div>

            <div class="border-t pt-8">
                <h2 class="text-2xl font-bold mb-6">Ein Durchlauf des MLP: 4 Schritte</h2>
                
                <div class="space-y-8">
                    <!-- Step 1 -->
                    <div class="p-6 bg-gray-50 rounded-lg">
                        <h3 class="text-xl font-semibold mb-3">1. Input & Erste Matrix-Multiplikation</h3>
                        <p>Nach der Attention-Schicht haben wir mehrere Vektoren erhalten. Da in der MLP-Schicht alle Vektoren parallel und isoliert voneinander bearbeitet werden, betrachten wir zur Vereinfachung nur einen Vektor, welcher den "Airbus A320" widerspiegelt.</p>
                        <p class="mt-4">Als erster Schritt wird dieser Vektor mit einer Matrix multipliziert. Diese Matrix enthält gelernte Modellparameter. Jede Zeile der Matrix kann als "Fragenvektor" betrachtet werden. Die Multiplikation ergibt das Skalarprodukt der beiden Vektoren. Ist das Ergebnis nahe 1, stimmen die Vektoren stark überein (die "Frage" trifft zu).</p>
                        <div class="mt-4 p-4 bg-white rounded-lg shadow-inner font-sans">
                            <div class="flex flex-col sm:flex-row justify-around items-center space-y-4 sm:space-y-0 sm:space-x-2">
                                <!-- Input Vector -->
                                <div class="text-center">
                                    <p class="font-semibold text-gray-800 text-sm">Input Vektor ("Airbus A320")</p>
                                    <div class="p-2 mt-2 bg-indigo-50 border border-indigo-200 rounded-lg">
                                        <p class="font-mono text-indigo-800 text-sm">[0.8, 0.2, 0.9, ...]</p>
                                    </div>
                                </div>
                        
                                <!-- Multiplication Symbol -->
                                <div class="text-2xl text-gray-400">×</div>
                        
                                <!-- Matrix -->
                                <div class="text-center">
                                    <p class="font-semibold text-gray-800 text-sm">Matrix (Gelernte "Fragen")</p>
                                    <div class="p-2 mt-2 bg-gray-100 border border-gray-200 rounded-lg font-mono text-xs text-left space-y-1">
                                        <p>"Ist es ein Fahrzeug?": <span class="text-gray-600">[0.9, 0.1, ...]</span></p>
                                        <p>"Kann es fliegen?": <span class="text-gray-600">[0.7, 0.3, ...]</span></p>
                                        <p>"Ist es ein Tier?": <span class="text-gray-600">[-0.8, 0.9, ...]</span></p>
                                    </div>
                                </div>
                        
                                <!-- Arrow -->
                                <div class="text-3xl text-indigo-500 transform sm:rotate-0 rotate-90">→</div>
                        
                                <!-- Output Vector -->
                                <div class="text-center">
                                    <p class="font-semibold text-gray-800 text-sm">Ergebnis</p>
                                    <div class="p-2 mt-2 bg-green-50 border border-green-200 rounded-lg space-y-1 text-left">
                                        <p class="font-mono text-xs text-green-800">0.95 <span class="text-gray-500">(relevant)</span></p>
                                        <p class="font-mono text-xs text-green-800">0.98 <span class="text-gray-500">(relevant)</span></p>
                                        <p class="font-mono text-xs text-red-700">-0.5 <span class="text-gray-500">(irrelevant)</span></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p class="mt-4 text-sm text-gray-600">In realen LLMs sind die Fragenvektoren komplexer (z.B. die Addition der Vektoren "Kann fliegen" + "Ist ein Flugzeug"). Zusätzlich wird ein "Bias"-Vektor addiert, um die Ergebnisse anzupassen.</p>
                    </div>

                    <!-- Step 2 -->
                    <div class="p-6 bg-gray-50 rounded-lg">
                        <h3 class="text-xl font-semibold mb-3">2. Nicht-lineare Aktivierung (ReLU)</h3>
                        <p>Der nächste Schritt entscheidet, welche der "Fragen" als zutreffend gelten. Dafür wird eine nicht-lineare Funktion wie ReLU (Rectified Linear Unit) verwendet.</p>
                        <p class="mt-4">Die ReLU-Funktion setzt alle negativen Werte auf 0 und behält positive Werte unverändert bei. Trifft eine "Frage" zu (Wert > 0), ist das entsprechende Neuron "aktiv". Trifft sie nicht zu (Wert <= 0), ist es "inaktiv".</p>
                        <div class="mt-4 p-4 bg-white rounded-lg shadow-inner grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                            <!-- ReLU Graph -->
                            <div>
                                <h4 class="font-semibold text-center mb-2">Grafik der ReLU-Funktion</h4>
                                <div class="p-4 flex justify-center">
                                    <svg width="200" height="150" viewBox="0 0 100 80" class="font-sans">
                                        <!-- Axis -->
                                        <line x1="5" y1="70" x2="95" y2="70" stroke="currentColor" class="text-gray-400" stroke-width="1"/> <!-- X-Axis -->
                                        <line x1="50" y1="5" x2="50" y2="75" stroke="currentColor" class="text-gray-400" stroke-width="1"/> <!-- Y-Axis -->
                                        <text x="90" y="78" font-size="6" class="text-gray-500">Input</text>
                                        <text x="55" y="10" font-size="6" class="text-gray-500">Output</text>
                                        <text x="42" y="78" font-size="6" class="text-gray-500">0</text>
                            
                                        <!-- ReLU Function Line -->
                                        <line x1="5" y1="70" x2="50" y2="70" stroke="currentColor" class="text-orange-500" stroke-width="1.5"/>
                                        <line x1="50" y1="70" x2="95" y2="25" stroke="currentColor" class="text-orange-500" stroke-width="1.5" stroke-linecap="round"/>
                                    </svg>
                                </div>
                            </div>
                            <!-- Example Calculation -->
                            <div class="font-mono text-sm">
                                <h4 class="font-semibold text-center mb-2 text-gray-800">Beispiel-Rechnung</h4>
                                <div class="bg-gray-100 p-4 rounded-lg" style="letter-spacing: 0.5px;">
                                    <p class="text-gray-500">// Input</p>
                                    <p><span class="text-blue-600">Input</span> = [0.95, 0.98, -0.5, ...]</p>
                                    <br>
                                    <p class="text-gray-500">// ReLU anwenden: max(0, x)</p>
                                    <p><span class="text-green-600">Output</span> = [<span class="text-orange-500">0.95</span>, <span class="text-orange-500">0.98</span>, <span class="text-red-500">0.0</span>, ...]</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 3 -->
                    <div class="p-6 bg-gray-50 rounded-lg">
                        <h3 class="text-xl font-semibold mb-3">3. Zweite Matrix-Multiplikation</h3>
                        <p>Das Ergebnis aus der ReLU-Funktion wird erneut mit einer Matrix multipliziert. Man kann sich diese Matrix spaltenweise vorstellen, wobei jede Spalte eine bestimmte Information im ursprünglichen Vektorraum widerspiegelt (z.B. "150-187 Sitzplätze").</p>
                        <p class="mt-4">Nur wenn ein Neuron im vorherigen Schritt aktiv war, wird die zugehörige Informations-Spalte zum Endergebnis dazugerechnet. Alle anderen werden ignoriert (da sie mit 0 multipliziert werden).</p>
                        <div class="mt-4 p-4 bg-white rounded-lg shadow-inner font-sans">
                            <div class="flex flex-col sm:flex-row justify-around items-center space-y-4 sm:space-y-0 sm:space-x-2">
                                <!-- Input Vector -->
                                <div class="text-center">
                                    <p class="font-semibold text-gray-800 text-sm">Input (von ReLU)</p>
                                    <div class="p-2 mt-2 bg-yellow-50 border border-yellow-200 rounded-lg">
                                        <p class="font-mono text-yellow-800 text-sm">[0.95, 0.98, 0.0, ...]</p>
                                    </div>
                                </div>
                        
                                <!-- Multiplication Symbol -->
                                <div class="text-2xl text-gray-400">×</div>
                        
                                <!-- Matrix -->
                                <div class="text-center">
                                    <p class="font-semibold text-gray-800 text-sm">Matrix 2 (Fakten)</p>
                                    <div class="p-2 mt-2 bg-gray-100 border border-gray-200 rounded-lg font-mono text-xs text-left space-y-1">
                                        <p>Spalte "Sitzplätze": <span class="text-gray-600">[0.9, ...]</span></p>
                                        <p>Spalte "Fahrzeugtyp": <span class="text-gray-600">[0.1, ...]</span></p>
                                        <p>Spalte "Tierart": <span class="text-gray-600">[0.0, ...]</span></p>
                                    </div>
                                </div>
                        
                                <!-- Arrow -->
                                <div class="text-3xl text-indigo-500 transform sm:rotate-0 rotate-90">→</div>
                        
                                <!-- Output Vector -->
                                <div class="text-center">
                                    <p class="font-semibold text-gray-800 text-sm">Output (Fakten-Vektor)</p>
                                    <div class="p-2 mt-2 bg-green-50 border border-green-200 rounded-lg text-left">
                                        <p class="font-mono text-xs text-green-800">0.95 * [0.1,...]</p>
                                        <p class="font-mono text-xs text-green-800">+ 0.98 * [0.9,...]</p>
                                        <p class="font-mono text-xs text-green-800">+ 0.0 * [0.0,...]</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p class="mt-4 text-sm text-gray-600">In der Realität enthalten Spalten oft eine Addition verschiedener Fakten, und das Endergebnis ist die Summe aller Spalten von zutreffenden Fragen.</p>
                    </div>

                    <!-- Step 4 -->
                    <div class="p-6 bg-gray-50 rounded-lg">
                        <h3 class="text-xl font-semibold mb-3">4. Residuelle Verbindung</h3>
                        <p>Damit der ursprüngliche Vektor aus der Attention beim Verarbeiten nicht komplett vergessen wird, addiert der letzte Schritt des MLP den ursprünglichen Vektor mit dem Vektor, welcher die zusätzlichen Fakten enthält.</p>
                        <div class="mt-4 p-4 bg-white rounded-lg shadow-inner font-sans">
                            <div class="flex flex-col sm:flex-row justify-around items-center space-y-4 sm:space-y-0 sm:space-x-2">
                                <!-- Original Vector -->
                                <div class="text-center">
                                    <p class="font-semibold text-gray-800 text-sm">Original Vektor</p>
                                    <div class="p-2 mt-2 bg-indigo-50 border border-indigo-200 rounded-lg">
                                        <p class="font-mono text-indigo-800 text-sm">["Airbus", "A320", ...]</p>
                                    </div>
                                </div>
                        
                                <!-- Addition Symbol -->
                                <div class="text-2xl text-gray-400">+</div>
                        
                                <!-- Facts Vector -->
                                <div class="text-center">
                                    <p class="font-semibold text-gray-800 text-sm">Fakten-Vektor</p>
                                    <div class="p-2 mt-2 bg-green-50 border border-green-200 rounded-lg">
                                        <p class="font-mono text-green-800 text-sm">["150-187 Sitzplätze", ...]</p>
                                    </div>
                                </div>
                        
                                <!-- Arrow -->
                                <div class="text-3xl text-indigo-500 transform sm:rotate-0 rotate-90">→</div>
                        
                                <!-- Final Vector -->
                                <div class="text-center">
                                    <p class="font-semibold text-gray-800 text-sm">Finaler Vektor</p>
                                    <div class="p-2 mt-2 bg-purple-50 border border-purple-200 rounded-lg">
                                        <p class="font-mono text-purple-800 text-sm">["Airbus A320", "150-187 Sitze", ...]</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p class="mt-4">In unserem Beispiel hätten wir nun einen Vektor, welcher die Informationen "Airbus", "A320" und nun auch "150-187 Sitzplätze" beinhaltet.</p>
                    </div>
                </div>
            </div>
        </div>
    </main>
</body>
</html>